{% if page.author and site.authors[page.author] %}
{% assign author = site.authors[page.author] %}
{% else %}
{% assign author = site.author %}
{% endif %}

<div itemprop="author" itemscope itemtype="http://schema.org/Person">

    {% if author.avatar %}
    <div class="uk-text-center">
        {% if author.avatar == 'github' and author.github %}
        {% avatar {{ author.github }} size=300 %}
        {% else %}
        {% assign original_url = author.avatar %}
        {% unless author.avatar contains 'http' %}
        {% assign original_url = site.uploads | absolute_url | append: author.avatar %}
        {% endunless %}
        {% if jekyll.environment == 'production' %}
          {% assign base_cdn = site.url | append: '/.netlify/images?url=' %}
          {% assign fit_params = '&fit=cover&fm=webp' %}
          {% assign encoded = original_url | url_encode %}
          {% assign src_128 = base_cdn | append: encoded | append: '&w=128&h=128' | append: fit_params %}
          {% assign src_64  = base_cdn | append: encoded | append: '&w=64&h=64'   | append: fit_params %}
          {% assign src_96  = base_cdn | append: encoded | append: '&w=96&h=96'   | append: fit_params %}
          {% assign src_192 = base_cdn | append: encoded | append: '&w=192&h=192' | append: fit_params %}
          {% assign src_256 = base_cdn | append: encoded | append: '&w=256&h=256' | append: fit_params %}
          <img class="avatar"
              src="{{ src_128 }}"
              srcset="{{ src_64 }} 64w, {{ src_96 }} 96w, {{ src_128 }} 128w, {{ src_192 }} 192w, {{ src_256 }} 256w"
              sizes="(min-width: 1200px) 128px, (min-width: 960px) 128px, (min-width: 640px) 96px, 64px"
              width="128" height="128" loading="lazy" decoding="async"
              alt="{{ author.name }}">
        {% else %}
          <img class="avatar" src="{{ original_url }}"
              width="128" height="128" loading="lazy" decoding="async"
              alt="{{ author.name }}">
        {% endif %}
        {% endif %}
    </div>
    {% endif %}

    {% if author.name %}
    <h3 class="uk-text-center" itemprop="name">{{ author.name }}</h3>
    {% endif %}

    {% if author.name %}
    <p itemprop="description">{{ author.bio }}</p>
    {% endif %}

    <div class="uk-margin-small-top">
        <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">
            {% if author.twitter %}
            <div class="uk-first-column">
                <a href="{{ author.twitter }}" data-uk-icon="icon: twitter" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.facebook %}
            <div>
                <a href="{{ author.facebook }}" data-uk-icon="icon: facebook" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.flickr %}
            <div>
                <a href="{{ author.flickr }}" data-uk-icon="icon: flickr" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.dribbble %}
            <div>
                <a href="{{ author.dribbble }}" data-uk-icon="icon: dribbble" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.instagram %}
            <div>
                <a href="{{ author.instagram }}" data-uk-icon="icon: instagram" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.googleplus %}
            <div>
                <a href="{{ author.googleplus }}" data-uk-icon="icon: google-plus" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.linkedin %}
            <div>
                <a href="{{ author.linkedin }}" data-uk-icon="icon: linkedin" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.pinterest %}
            <div>
                <a href="{{ author.pinterest }}" data-uk-icon="icon: pinterest" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.vimeo %}
            <div>
                <a href="{{ author.vimeo }}" data-uk-icon="icon: vimeo" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.youtube %}
            <div>
                <a href="{{ author.youtube }}" data-uk-icon="icon: youtube" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.github %}
            <div>
                <a href="{{ author.github }}" data-uk-icon="icon: github" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
            {% if author.email %}
            <div>
                <a href="{{ author.email }}" data-uk-icon="icon: mail" class="uk-icon-link uk-icon" target="_blank"></a>
            </div>
            {% endif %}
            {% if author.website %}
            <div>
                <a href="{{ author.website }}" data-uk-icon="icon: link" class="uk-icon-link uk-icon"
                    target="_blank"></a>
            </div>
            {% endif %}
        </div>
    </div>
</div>